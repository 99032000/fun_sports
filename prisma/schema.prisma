datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id             String           @id @default(cuid())
  email          String           @unique
  name           String?
  phone          String?          @unique
  active         Boolean          @default(true)
  Social_events  Social_event[]
  Social_booking Social_booking[]
  wechatId       String?
  created_at     DateTime         @default(now())
  updated_at     DateTime         @default(now()) @updatedAt
  Organization   Organization[]
}

model Organization {
  id       Int     @id @default(autoincrement())
  name     String  @unique
  owner    User    @relation(fields: [userId], references: [id])
  wechatId String
  phone    String? @unique
  userId   String
}

model Social_event {
  id             Int              @id @default(autoincrement())
  name           String
  address        String
  venue_name     String
  date           DateTime         @db.Timestamp(0)
  owner          User?            @relation(fields: [ownerId], references: [id])
  ownerId        String
  booking_groups Json
  created_at     DateTime         @default(now())
  updated_at     DateTime         @default(now()) @updatedAt
  Social_booking Social_booking[]
}

model Social_booking {
  id              Int          @id @default(autoincrement())
  Social_events   Social_event @relation(fields: [social_eventsId], references: [id])
  User            User         @relation(fields: [userId], references: [id])
  created_at      DateTime     @default(now())
  updated_at      DateTime     @default(now()) @updatedAt
  social_eventsId Int
  userId          String
}

model payments {
  id    Int    @id @default(autoincrement())
  type  String @unique
  image String
}
